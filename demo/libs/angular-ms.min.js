"use strict";var ngms=angular.module("angular-ms",[]),messageService=function(){function n(n){return u[n]=u[n]||{},u[n]}function t(t,e){var i=n(t);return i[e]=i[e]||[],i[e]}function e(){var n=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===t?e:3&e|8).toString(16)});return t}function i(n){return new c(n)}function r(n,t){return new c(n).getTopic(t)}var u={},s=function(n,t){function e(){return name}function i(){return t}function r(e){n.publish(t,e)}function u(e){return n.subscribe(t,e)}function s(){}function c(e){n.unsubscribe(t,e)}this.getChannelName=e,this.getTopic=i,this.publish=r,this.subscribe=u,this.unsubscribe=c,this.unsubscribeAll=s},c=function(n){function i(){return n}function r(n){return new s(f,n)}function c(e,i){var r=t(n,e),s=r.filter(function(t){var r=t.callback(i,e,n);return!r});u[n][e]=s}function o(i,r){var u=e(),s=t(n,i);return s.push({token:u,callback:r}),h[u]=i,u}function a(){for(var n in h)x(h[n],n);h={}}function x(e,i){var r=t(n,e),s=r.filter(function(n){return n.token!==i});delete h[e],0===s.length?delete u[n][e]:u[n][e]=s,0===Object.keys(u[n]).length&&delete u[n]}var f=this,h={};this.getName=i,this.getTopic=r,this.publish=c,this.subscribe=o,this.unsubscribe=x,this.unsubscribeAll=a};this.getChannel=i,this.getTopic=r};ngms.service("messageService",messageService);