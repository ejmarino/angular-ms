!function(){"use strict";var n=angular.module("angular-ms",[]),t=function(){function n(n){return u[n]=u[n]||{},u[n]}function t(t,e){var i=n(t);return i[e]=i[e]||[],i[e]}function e(){var n=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===t?e:3&e|8).toString(16)});return t}function i(n){return new s(n)}function r(n,t){return new s(n).getTopic(t)}var u={},c=function(n,t){function e(){return name}function i(){return t}function r(e){n.publish(t,e)}function u(e){return n.subscribe(t,e)}function c(){}function s(e){n.unsubscribe(t,e)}this.getChannelName=e,this.getTopic=i,this.publish=r,this.subscribe=u,this.unsubscribe=s,this.unsubscribeAll=c},s=function(n){function i(){return n}function r(n){return new c(f,n)}function s(e,i){var r=t(n,e),c=r.filter(function(t){var r=t.callback(i,e,n);return!r});u[n][e]=c}function o(i,r){var u=e(),c=t(n,i);return c.push({token:u,callback:r}),h[u]=i,u}function x(){for(var n in h)a(h[n],n);h={}}function a(e,i){var r=t(n,e),c=r.filter(function(n){return n.token!==i});delete h[e],0===c.length?delete u[n][e]:u[n][e]=c,0===Object.keys(u[n]).length&&delete u[n]}var f=this,h={};this.getName=i,this.getTopic=r,this.publish=s,this.subscribe=o,this.unsubscribe=a,this.unsubscribeAll=x};this.getChannel=i,this.getTopic=r};n.service("messageService",t)}();